<!doctype html>
<html lang="ar">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>نادي برينسيبيا العلمي</title>
  <style>
    :root{
      --blue-1:#003f8a;
      --blue-2:#0066c7;
      --blue-3:#2ea6ff;
      --white:#ffffff;
      --card-shadow: 0 10px 30px rgba(2,6,23,0.45);
      --radius:14px;
      --max-width:1200px;
      --font-family:"Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--font-family);
      background:linear-gradient(180deg,var(--blue-1) 0%, #052a5b 35%, #011328 100%);
      color:var(--white);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      direction:rtl;
      overflow-x:hidden;
    }
    #bg-canvas{
      position:fixed;
      inset:0;
      z-index:0;
      pointer-events:none;
      display:block;
    }
    .wrap{
      position:relative;
      z-index:2;
      max-width:var(--max-width);
      margin:0 auto;
      padding:32px;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:12px 0;
    }
    .logo{display:flex;align-items:center;gap:12px;text-decoration:none;color:var(--white)}
    .logo .mark{
      width:56px;height:56px;border-radius:12px;
      background:linear-gradient(135deg,var(--blue-2),var(--blue-3));
      display:flex;align-items:center;justify-content:center;
      box-shadow:0 6px 20px rgba(46,166,255,0.12), inset 0 -6px 20px rgba(0,0,0,0.12);
      font-weight:700;font-size:20px;letter-spacing:1px;
    }
    .logo h1{margin:0;font-size:18px}
    nav{display:flex;gap:12px;align-items:center}
    nav a{
      color:var(--white);text-decoration:none;padding:8px 14px;border-radius:10px;
      transition:all .25s ease;font-size:15px;
    }
    nav a:hover{background:rgba(255,255,255,0.06);transform:translateY(-3px)}
    .hero{
      display:flex;gap:28px;align-items:center;justify-content:space-between;margin-top:28px;
      padding:28px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.00));
      border-radius:18px;backdrop-filter: blur(6px);box-shadow:var(--card-shadow);
    }
    .hero-left{flex:1 1 540px;min-width:280px}
    .kicker{
      display:inline-block;background:linear-gradient(90deg,var(--blue-3),var(--blue-2));
      color:var(--white);padding:8px 12px;border-radius:999px;font-weight:700;font-size:13px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
    }
    .hero h2{margin:18px 0 10px;font-size:36px;line-height:1.03}
    .hero p{margin:0 0 18px;color:rgba(255,255,255,0.88);font-size:16px;max-width:680px}
    .cta-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .btn{display:inline-flex;align-items:center;gap:10px;padding:14px 20px;border-radius:12px;border:0;cursor:pointer;font-weight:700;font-size:15px;transition:transform .15s ease, box-shadow .15s ease;position:relative;overflow:hidden}
    .btn.primary{background:linear-gradient(90deg,var(--blue-3),var(--blue-2));color:#01203a;box-shadow: 0 12px 30px rgba(46,166,255,0.16), 0 6px 10px rgba(0,0,0,0.2)}
    .btn.secondary{background:transparent;color:var(--white);border:1px solid rgba(255,255,255,0.08);backdrop-filter: blur(4px)}
    .btn:active{transform:translateY(2px)}.btn:hover{transform:translateY(-4px)}
    .hero-card{width:320px;padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));box-shadow: 0 10px 30px rgba(2,6,23,0.5);backdrop-filter: blur(6px);text-align:left;margin-left:auto}
    .stats{display:flex;gap:12px;margin-top:12px;justify-content:space-between}
    .stat{flex:1;text-align:center;padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));transition:transform .2s}
    .stat h3{margin:0;font-size:20px}.stat p{margin:6px 0 0;font-size:12px;color:rgba(255,255,255,0.8)}
    .stat:hover{transform:translateY(-6px)}
    .sections{margin-top:28px;display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{padding:18px;border-radius:14px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow: 0 8px 20px rgba(2,6,23,0.45);transition:transform .25s ease, box-shadow .25s;min-height:140px}
    .card h4{margin:0 0 10px}.card p{margin:0;color:rgba(255,255,255,0.85)}
    .card:hover{transform:translateY(-8px); box-shadow:0 20px 40px rgba(2,6,23,0.6)}
    .reveal{opacity:0;transform:translateY(18px) scale(.995);transition:all .7s cubic-bezier(.2,.9,.2,1)}
    .reveal.visible{opacity:1;transform:none}
    .magazine{margin-top:28px;display:flex;gap:18px;align-items:stretch}
    .magazine .cover{flex:0 0 280px;border-radius:12px;overflow:hidden;background:linear-gradient(135deg,var(--blue-2),var(--blue-3));display:flex;align-items:center;justify-content:center;padding:20px;box-shadow:0 16px 40px rgba(0,0,0,0.35)}
    .magazine .info{flex:1;padding:18px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.008))}
    .join{margin-top:28px;padding:18px;border-radius:12px;background:linear-gradient(90deg, rgba(46,166,255,0.06), rgba(0,102,199,0.03));display:flex;gap:12px;align-items:center;justify-content:space-between}
    .join form{display:flex;gap:12px;align-items:center}
    .input{padding:12px 14px;border-radius:10px;border:0;outline:none;min-width:200px;font-size:14px;background:rgba(255,255,255,0.03);color:var(--white)}
    footer{margin-top:36px;padding:22px;text-align:center;color:rgba(255,255,255,0.72);font-size:14px}
    @media (max-width:980px){
      .sections{grid-template-columns:repeat(2,1fr)}
      .hero{flex-direction:column}
      .magazine{flex-direction:column}
      .hero-card{width:100%}
      header{flex-direction:column;align-items:flex-start;gap:8px}
    }
    @media (max-width:640px){
      .sections{grid-template-columns:1fr}
      nav{display:none}
      .hero h2{font-size:28px}
      .kicker{font-size:12px;padding:6px 10px}
    }
    .pulse{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:160%;height:160%;background:radial-gradient(circle, rgba(46,166,255,0.18) 0%, rgba(46,166,255,0.02) 40%, transparent 70%);opacity:0;transition:opacity .3s ease;pointer-events:none}
    .btn.primary:hover .pulse{opacity:1}
    .ripple{position:absolute;border-radius:999px;transform:scale(0);animation:ripple .6s linear;background:rgba(255,255,255,0.22);pointer-events:none}
    @keyframes ripple{to{transform:scale(4);opacity:0}}
    .spark{display:inline-block;width:10px;height:10px;border-radius:50%;background:var(--white);box-shadow:0 0 12px rgba(255,255,255,0.9);margin-left:8px;animation:float 2s ease-in-out infinite}
    @keyframes float{0%{transform:translateY(0)}50%{transform:translateY(-6px)}100%{transform:translateY(0)}}
  </style>
</head>
<body>

<canvas id="bg-canvas"></canvas>

<div class="wrap">

  <header>
    <a class="logo" href="#" id="logoLink">
      <div class="mark">P</div>
      <div>
        <h1>نادي برينسيبيا</h1>
        <div style="font-size:12px;color:rgba(255,255,255,0.8)">From Principles to Progress</div>
      </div>
    </a>

    <nav>
      <a href="#about">حول النادي</a>
      <a href="#activities">الأنشطة</a>
      <a href="#mag">المجلة</a>
      <a href="#join">انضم الآن</a>
      <a href="#contact">اتصل بنا</a>
    </nav>
  </header>

  <section class="hero">
    <div class="hero-left">
      <span class="kicker">انضم إلينا</span>
      <h2>اكتشف متعة العلم واصنع مستقبلًا تقنيًا مبتكرًا</h2>
      <p>نادي برينسيبيا العلمي مكان يجمع الطلبة من مختلف التخصصات للعمل على مشاريع حقيقية وتجارب علمية وورشات تقنية تعزز مهاراتك وتفتح أمامك أبواب المسابقات والفرص المهنية</p>

      <div class="cta-row">
        <button class="btn primary" id="joinBtn">
          انضم الآن
          <span class="spark" aria-hidden="true"></span>
          <span class="pulse" aria-hidden="true"></span>
        </button>

        <button class="btn secondary" id="learnBtn">المزيد عن النادي</button>
      </div>

      <div style="height:16px"></div>

      <div style="display:flex;gap:12px;flex-wrap:wrap">
        <div style="display:flex;gap:8px;align-items:center;background:rgba(255,255,255,0.02);padding:8px 12px;border-radius:10px">
          <strong style="font-size:18px">2022</strong>
          <span style="font-size:13px;color:rgba(255,255,255,0.85)">سنة التأسيس</span>
        </div>
        <div style="display:flex;gap:8px;align-items:center;background:rgba(255,255,255,0.02);padding:8px 12px;border-radius:10px">
          <strong style="font-size:18px">مجلة سديم</strong>
          <span style="font-size:13px;color:rgba(255,255,255,0.85)">منبرنا للنشر</span>
        </div>
      </div>
    </div>

    <aside class="hero-card reveal" id="heroCard">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h3>لماذا برينسيبيا</h3>
          <p style="margin-top:6px;font-size:13px;color:rgba(255,255,255,0.9)">بيئة تفاعلية للمشاريع والورشات والمسابقات وفرص التعاون مع شركات ومجموعات بحثية</p>
        </div>
        <div style="text-align:center">
          <div style="font-size:28px;font-weight:800">🌌</div>
        </div>
      </div>

      <div class="stats" style="margin-top:14px">
        <div class="stat">
          <h3 id="membersCount">120+</h3>
          <p>أعضاء نشطون</p>
        </div>
        <div class="stat">
          <h3>20+</h3>
          <p>ورشة سنة</p>
        </div>
        <div class="stat">
          <h3>10</h3>
          <p>إصدارات المجلة</p>
        </div>
      </div>
    </aside>
  </section>

  <section class="sections">
    <div class="card reveal" id="about">
      <h4>حول النادي</h4>
      <p>تأسس برينسيبيا ليقرب العلوم من الطلبة ويقدم منصة لتبادل المعرفة وإطلاق المشاريع في مجالات الفيزياء والكيمياء والتقنية</p>
    </div>

    <div class="card reveal" id="activities">
      <h4>الأنشطة</h4>
      <p>ورش عمل، تجارب معملية، لقاءات مع مختصين، مسابقات برمجة وهندسة، ونشر في مجلة سديم</p>
    </div>

    <div class="card reveal">
      <h4>المهارات التي تكتسبها</h4>
      <p>برمجة، تحليل بيانات، تجارب مخبرية، كتابة علمية، إدارة مشاريع، وعروض تقديمية احترافية</p>
    </div>
  </section>

  <section class="magazine reveal" id="mag">
    <div class="cover">
      <div style="text-align:center">
        <div style="font-size:28px;font-weight:700">سديم</div>
        <div style="margin-top:6px;font-size:13px;opacity:.95">مجلة علمية تقنية</div>
      </div>
    </div>
    <div class="info">
      <h3>مجلة سديم</h3>
      <p>منصة طلابية لنشر مقالات في الحوسبة، الذكاء الاصطناعي، الفيزياء التطبيقية والكيمياء الإبداعية. شارك بمقالك أو مشروعك لتظهر بين قرائنا</p>
      <div style="margin-top:12px;display:flex;gap:8px">
        <button class="btn primary" id="openMagBtn">اقرأ العدد الأخير</button>
        <button class="btn secondary" id="contributeBtn">ساهم بالمقال</button>
      </div>
    </div>
  </section>

  <section class="join reveal" id="join">
    <div>
      <h3 style="margin:0 0 6px">انضم بسرعة</h3>
      <p style="margin:0 0 8px;color:rgba(255,255,255,0.9)">أدخل بريدك الالكتروني وسنوافيك بدعوات الورش والمشاريع</p>
      <form id="quickJoin">
        <input class="input" type="email" placeholder="بريدك الإلكتروني" required id="emailField" />
        <button class="btn primary" type="submit">سجل</button>
      </form>
    </div>
    <div style="text-align:left;max-width:420px">
      <h4 style="margin:0 0 8px">ماذا تنتظر</h4>
      <p style="margin:0;color:rgba(255,255,255,0.85)">فرص تدريبية، مشاريع مشتركة، وشبكة علاقات مهنية تبدأ من هنا</p>
    </div>
  </section>

  <footer id="contact">
    © نادي برينسيبيا العلمي 2022 — تواصل معنا عبر البريد info@principia.club
  </footer>

</div>

<div id="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;z-index:40">
  <div style="position:absolute;inset:0;background:linear-gradient(180deg, rgba(1,10,30,0.7), rgba(0,0,0,0.7));backdrop-filter:blur(3px)"></div>
  <div style="position:relative;max-width:720px;width:92%;padding:20px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 30px 80px rgba(0,0,0,0.7);">
    <h3 style="margin-top:0">انضمام إلى نادي برينسيبيا</h3>
    <p>املأ البيانات التالية وسنعيد الاتصال بك لدعوتك للفعالية القادمة</p>
    <form id="fullJoin" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:12px">
      <input class="input" placeholder="الاسم الكامل" required name="name" />
      <input class="input" placeholder="التخصص" required name="major" />
      <input class="input" placeholder="السنة الدراسية" required name="year" />
      <input class="input" placeholder="بريدك الإلكتروني" required name="email" type="email" />
      <textarea class="input" name="note" placeholder="هل لديك فكرة لمشروع؟" style="grid-column:1/-1;height:90px;padding-top:10px"></textarea>
      <div style="grid-column:1/-1;display:flex;gap:8px;justify-content:flex-end">
        <button class="btn secondary" type="button" id="closeModal">إلغاء</button>
        <button class="btn primary" type="submit">إرسال و الانضمام</button>
      </div>
    </form>
  </div>
</div>

<script>
  // عناصر الواجهة المحفوظة
  const canvas = document.getElementById('bg-canvas');
  const ctx = canvas.getContext && canvas.getContext('2d');
  let W = innerWidth;
  let H = innerHeight;
  let particles = [];
  let particleCount = Math.round((W * H) / 45000);

  // دالة مساعدة
  function rand(min, max){ return Math.random() * (max - min) + min }

  // فصل إنشاء عدد الجسيمات ليعاد حسابه عند تغيير الحجم
  function computeParticleCount(){
    W = canvas.width = innerWidth;
    H = canvas.height = innerHeight;
    let base = Math.round((W * H) / 45000);
    // على الشاشات الصغيرة نقلل العدد لتحسين الأداء
    if (innerWidth < 700) base = Math.max(12, Math.floor(base * 0.45));
    particleCount = Math.max(8, base);
    return particleCount;
  }

  class Particle {
    constructor(){
      this.reset();
    }
    reset(){
      this.x = Math.random() * W;
      this.y = Math.random() * H;
      this.vx = rand(-0.2, 0.6);
      this.vy = rand(-0.3, 0.3);
      this.size = rand(0.6, 2.6);
      this.alpha = rand(0.05, 0.35);
    }
    update(){
      this.x += this.vx;
      this.y += this.vy;
      if (this.x > W + 20) this.x = -20;
      if (this.x < -20) this.x = W + 20;
      if (this.y > H + 20) this.y = -20;
      if (this.y < -20) this.y = H + 20;
    }
    draw(){
      ctx.beginPath();
      ctx.fillStyle = 'rgba(46,166,255,' + this.alpha + ')';
      ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
      ctx.fill();
    }
  }

  function initParticles(){
    particles = [];
    const n = computeParticleCount();
    for(let i = 0; i < n; i++) particles.push(new Particle());
  }

  // إعادة ضبط عند تغيير حجم النافذة
  function onResize(){
    computeParticleCount();
    // إذا كان عدد الجسيمات الجديد أكبر أو أصغر نعيد تهيئتها
    if (particles.length !== particleCount){
      initParticles();
    }
  }
  addEventListener('resize', () => {
    // نخدع المتصفح للتقليل من النداءات المتكررة
    clearTimeout(window._resizeTimer);
    window._resizeTimer = setTimeout(onResize, 120);
  });

  // حلقة الرسم
  function loop(){
    if (!ctx) return;
    ctx.clearRect(0, 0, W, H);

    // تدرج إضاءة خفيف من الأعلى
    let g = ctx.createRadialGradient(W * 0.15, H * 0.12, 0, W * 0.35, H * 0.2, Math.max(W, H));
    g.addColorStop(0, 'rgba(46,166,255,0.08)');
    g.addColorStop(0.5, 'rgba(46,166,255,0.02)');
    g.addColorStop(1, 'rgba(0,0,0,0)');
    ctx.fillStyle = g;
    ctx.fillRect(0, 0, W, H);

    // رسم الجسيمات
    for (let p of particles){
      p.update();
      p.draw();
    }

    // رسم خطوط بين الجسيمات القريبة
    // نحد من حساب الأزواج إذا كان عدد الجسيمات كبيرًا
    const limitForLines = Math.min(particles.length, 220);
    for (let i = 0; i < limitForLines; i++){
      for (let j = i + 1; j < limitForLines; j++){
        const a = particles[i], b = particles[j];
        const dx = a.x - b.x, dy = a.y - b.y;
        const d2 = dx * dx + dy * dy;
        const threshold = 6000; // مربع المسافة
        if (d2 < threshold){
          const alpha = 0.12 * (1 - d2 / threshold);
          ctx.strokeStyle = 'rgba(46,166,255,' + alpha + ')';
          ctx.lineWidth = 0.6;
          ctx.beginPath();
          ctx.moveTo(a.x, a.y);
          ctx.lineTo(b.x, b.y);
          ctx.stroke();
        }
      }
    }

    requestAnimationFrame(loop);
  }

  // تهيئة أولية
  initParticles();
  loop();

  // الكشف عن العناصر عند التمرير
  const reveals = document.querySelectorAll('.reveal');
  if ('IntersectionObserver' in window){
    const io = new IntersectionObserver((entries, obs) => {
      entries.forEach(entry => {
        if (entry.isIntersecting){
          entry.target.classList.add('visible');
          obs.unobserve(entry.target);
        }
      });
    }, {threshold: 0.14});
    reveals.forEach(r => io.observe(r));
  } else {
    // في حال عدم توفر API نعرض العناصر افتراضياً
    reveals.forEach(r => r.classList.add('visible'));
  }

  // عداد الأعضاء مع حماية وجود العنصر
  const membersCountEl = document.getElementById('membersCount');
  let displayed = 120;
  function animateCount(){
    if (!membersCountEl) return;
    const target = 240;
    let current = displayed;
    const steps = 60;
    const step = Math.max(1, Math.ceil((target - current) / steps));
    const iv = setInterval(() => {
      current += step;
      membersCountEl.textContent = current + '+';
      if (current >= target){
        clearInterval(iv);
        displayed = target;
        membersCountEl.textContent = target + '+';
      }
    }, 30);
  }
  const heroCard = document.getElementById('heroCard');
  if (heroCard && 'IntersectionObserver' in window){
    const obsCard = new IntersectionObserver((entries, o) => {
      if (entries[0].isIntersecting){ animateCount(); o.disconnect(); }
    }, {threshold: 0.3});
    obsCard.observe(heroCard);
  } else {
    // عرض مباشر لو لا يوجد
    animateCount();
  }

  // تأثير ripple للزررن
  function createRipple(e){
    const btn = e.currentTarget;
    const rect = btn.getBoundingClientRect();
    const r = document.createElement('span');
    r.className = 'ripple';
    const size = Math.max(rect.width, rect.height);
    r.style.width = r.style.height = size + 'px';
    r.style.left = (e.clientX - rect.left - size / 2) + 'px';
    r.style.top = (e.clientY - rect.top - size / 2) + 'px';
    btn.appendChild(r);
    r.addEventListener('animationend', () => r.remove());
    setTimeout(() => { if (r.parentNode) r.remove() }, 800);
  }
  document.querySelectorAll('.btn').forEach(b => b.addEventListener('click', createRipple));

  // المودال والتعامل مع النماذج
  const modal = document.getElementById('modal');
  const joinBtn = document.getElementById('joinBtn');
  const closeModalBtn = document.getElementById('closeModal');
  if (joinBtn){
    joinBtn.addEventListener('click', (ev) => {
      ev.preventDefault();
      if (modal) modal.style.display = 'flex';
      const nameInput = document.querySelector('#modal input[name=name]');
      if (nameInput) nameInput.focus();
    });
  }
  if (closeModalBtn){
    closeModalBtn.addEventListener('click', () => {
      if (modal) modal.style.display = 'none';
    });
  }
  if (modal){
    modal.addEventListener('click', (e) => {
      if (e.target === modal) modal.style.display = 'none';
    });
  }

  // معالجة نموذج الانضمام السريع
  const quickJoin = document.getElementById('quickJoin');
  if (quickJoin){
    quickJoin.addEventListener('submit', (e) => {
      e.preventDefault();
      const emailField = document.getElementById('emailField');
      const email = emailField ? emailField.value.trim() : '';
      if (!email || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)){
        window.alert('الرجاء إدخال بريد إلكتروني صالح');
        return;
      }
      // تعبئة البريد في المودال إن وُجد وإظهاره
      const em = document.querySelector('#modal input[name=email]');
      if (em) em.value = email;
      if (modal) modal.style.display = 'flex';
    });
  }

  // معالجة الإرسال الكامل
  const fullJoin = document.getElementById('fullJoin');
  if (fullJoin){
    fullJoin.addEventListener('submit', (e) => {
      e.preventDefault();
      const fd = new FormData(fullJoin);
      const data = Object.fromEntries(fd.entries());
      // هنا يجب ربط إرسال البيانات بخدمة حقيقية عبر fetch
      console.log('انضمام جديد', data);
      window.alert('شكراً لتسجيلك سنوافيك قريباً بدعوة للفعالية');
      fullJoin.reset();
      if (modal) modal.style.display = 'none';
    });
  }

  // أزرار المجلة
  const openMagBtn = document.getElementById('openMagBtn');
  const contributeBtn = document.getElementById('contributeBtn');
  if (openMagBtn) openMagBtn.addEventListener('click', () => {
    window.alert('فتح العدد الأخير من مجلة سديم\nيمكنك ربط هذا الزر بصفحة أو ملف PDF للعرض');
  });
  if (contributeBtn) contributeBtn.addEventListener('click', () => {
    window.alert('شكراً لاهتمامك بالمساهمة\nأرسل مقالك إلى info@principia.club أو استخدم نموذج الانضمام');
  });

  // سلوك التنقل السلس
  document.querySelectorAll('a[href^="#"]').forEach(a => {
    a.addEventListener('click', (ev) => {
      ev.preventDefault();
      const href = a.getAttribute('href');
      if (!href || href === '#'){
        window.scrollTo({top:0, behavior:'smooth'});
        return;
      }
      const id = href.slice(1);
      const el = document.getElementById(id);
      if (el) el.scrollIntoView({behavior:'smooth', block:'start'});
    });
  });

  // إغلاق المودال بالكيبورد
  addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && modal && modal.style.display === 'flex') modal.style.display = 'none';
  });

  // تهيئة عدد الجسيمات الأولي بناء على حجم النافذة الحالي
  computeParticleCount();
</script>
</body>
</html>
